# 新時代SaaS Ver0.1 要件定義書（最短構築版）

## 🎯 目的と概要

4分割UIを最終形とするマルチタスク型SaaSのMVP版を最短構築。

現時点では1画面のみだが、内部構造は「複数スクリーンを動的生成可能」な設計にしておく。

すべての基本操作（プロジェクト作成、見積、メール送信、設定変更、売上確認など）をチャットUI経由のAPI呼び出しで行う。

## ⚙️ 技術スタック

| レイヤ | 技術 | 役割 |
|--------|------|------|
| フロントエンド | Next.js（App Router, TypeScript） | チャットUI、ステータス表示、API接続 |
| 状態管理 | Zustand or Redux Toolkit | タスク・スクリーン・メッセージの状態保持 |
| UIコンポーネント | TailwindCSS + shadcn/ui + framer-motion | 最小UI構築（チャット中心） |
| バックエンド | Node.js + Fastify（または Express） | REST API層、WebSocketサーバー |
| リアルタイム通信 | Socket.IO | チャット／ジョブ進行を双方向通信 |
| データベース | Supabase（PostgreSQL） | プロジェクト、ユーザー、ジョブ、売上データ |
| AI連携 | OpenAI GPT-5 API（または Claude） | チャット応答、見積生成、メール文面作成 |
| 決済連携 | Stripe API | サブスク／支払い処理 |
| 認証 | Supabase Auth | ログイン／アカウント管理 |

## 📋 機能要件

### コア機能

1. **チャットUI**
   - ユーザーからの入力を受け付け、AIが応答
   - すべての操作をチャット経由で実行可能

2. **プロジェクト管理**
   - プロジェクトの作成・編集・削除
   - プロジェクト情報の表示

3. **見積機能**
   - 見積書の生成
   - 見積内容の編集・保存

4. **メール送信**
   - メール文面の作成
   - メール送信機能

5. **設定管理**
   - アプリケーション設定の変更
   - ユーザー設定の管理

6. **売上確認**
   - 売上データの表示
   - 売上レポートの生成

### アーキテクチャ要件

1. **動的スクリーン生成**
   - 現時点では1画面のみだが、将来的に複数スクリーンを動的生成可能な設計
   - スクリーン管理のための状態管理構造を準備

2. **API駆動設計**
   - すべての操作をAPI呼び出しで実行
   - RESTful API設計に準拠

3. **リアルタイム通信**
   - チャットの双方向通信
   - ジョブ進行状況のリアルタイム更新

## 🏗️ システム構成

```
┌─────────────────┐
│   Next.js App   │
│  (Frontend)     │
│  - Chat UI      │
│  - Status       │
└────────┬────────┘
         │ HTTP/WebSocket
         │
┌────────▼────────┐
│  Node.js API    │
│  (Backend)      │
│  - REST API     │
│  - Socket.IO    │
└────────┬────────┘
         │
    ┌────┴────┬──────────┬──────────┐
    │         │          │          │
┌───▼───┐ ┌──▼───┐ ┌───▼───┐ ┌───▼───┐
│Supabase│ │OpenAI│ │Stripe │ │Socket │
│  DB    │ │ API  │ │ API   │ │  IO   │
└────────┘ └──────┘ └───────┘ └───────┘
```

## 📝 開発方針

1. **MVP優先**
   - 最小限の機能で動作するバージョンを優先
   - 段階的な機能追加を想定

2. **拡張性重視**
   - 将来的な機能追加に対応できる設計
   - モジュール化された構造

3. **チャット中心設計**
   - すべての操作をチャットUI経由で実行
   - 直感的な操作体験を提供

## 🔄 今後の拡張予定

- 4分割UIの実装
- 複数スクリーンの動的生成
- より高度なAI機能
- 詳細な分析・レポート機能

